<!DOCTYPE html>
<html>
<head>
    <title>URL Safety Checker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="container">
    <h1>ğŸ” URL Safety Checker</h1>

    <form method="POST">
        <input type="text" name="url" placeholder="Enter URL..." required>
        <button type="submit">Analyze</button>
    </form>

    {% if score is not none %}

    <div class="result-box">

        <div class="gauge-container">
            <div class="gauge">
                <div class="gauge-fill" data-score="{{ score }}"></div>
                <div class="needle" id="needle"></div>
                <div class="gauge-center"></div>
            </div>

            <div class="score-text">
                Risk Score: <span id="score-number">0</span>%
            </div>
        </div>

        <div class="status-text">
            {% if score < 30 %}
                <p class="safe">ğŸŸ¢ Safe Website</p>
            {% elif score < 70 %}
                <p class="warning">ğŸŸ¡ Suspicious Website</p>
            {% else %}
                <p class="danger">ğŸ”´ High Risk Website</p>
            {% endif %}
        </div>

        <div class="reasons">
            <h3>Analysis Details:</h3>
            <ul>
                {% for reason in reasons %}
                <li>{{ reason }}</li>
                {% endfor %}
            </ul>
        </div>

    </div>
    {% endif %}
</div>

<script>
const needle = document.getElementById("needle");
const fill = document.querySelector(".gauge-fill");
const scoreText = document.getElementById("score-number");

if (fill) {
    const score = parseInt(fill.getAttribute("data-score"));

    // Animate counter
    let count = 0;
    const counter = setInterval(() => {
        if (count >= score) {
            clearInterval(counter);
        } else {
            count++;
            scoreText.innerText = count;
        }
    }, 15);

    // Animate fill
    setTimeout(() => {
        fill.style.width = score + "%";
    }, 300);

    // Rotate needle
    const rotation = (score / 100) * 180 - 90;
    setTimeout(() => {
        needle.style.transform = `rotate(${rotation}deg)`;
    }, 300);

    // Dynamic color gradient
    if (score < 30) {
        fill.style.background = "linear-gradient(to right, #00ff88, #00cc66)";
    } else if (score < 70) {
        fill.style.background = "linear-gradient(to right, #ffcc00, #ff9900)";
    } else {
        fill.style.background = "linear-gradient(to right, #ff4d4d, #cc0000)";
    }
}
</script>

</body>
</html>
